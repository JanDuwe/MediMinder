import{$ as ve,A as _,B as W,Ba as Ee,C as S,D as pe,Da as ke,E as B,F as z,Fa as Te,H as ue,J as ge,O as m,Pa as ee,Q as f,Qa as Ie,R as Y,S as y,U as fe,V as he,W as H,Y as A,Z as K,a as ie,aa as G,ba as $,ca as Z,d as ne,da as o,e as oe,ea as c,f as ce,fa as b,g as T,ga as X,h as se,ha as q,i as p,ia as w,j as de,ja as J,k as P,ka as x,m as j,ma as s,n as R,o as v,oa as F,p as u,pa as Q,qa as N,r as g,ra as be,s as me,sa as Ce,ta as De,u as le,ua as Me,w as M,x as I,xa as ye,y as V,ya as we,z as U,za as xe}from"./chunk-HY5K4NQN.js";var We=["*"];var Be=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],ze=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],Ye=new _("MAT_CARD_CONFIG"),_e=(()=>{class t{appearance;constructor(){let e=S(Ye,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=f({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(a,i){a&2&&K("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:We,decls:1,vars:0,template:function(a,i){a&1&&(J(),x(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return t})(),Se=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275dir=y({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return t})();var Ae=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275dir=y({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})(),Fe=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275dir=y({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return t})(),Ne=(()=>{class t{align="start";static \u0275fac=function(a){return new(a||t)};static \u0275dir=y({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(a,i){a&2&&K("mat-mdc-card-actions-align-end",i.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"]})}return t})(),Oe=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275cmp=f({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:ze,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(a,i){a&1&&(J(Be),x(0),o(1,"div",0),x(2,1),c(),x(3,2))},encapsulation:2,changeDetection:0})}return t})();var Le=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=Y({type:t});static \u0275inj=U({imports:[ee,ee]})}return t})();var ae=(t,r)=>({taken:t,"not-taken":r,"dose-information":!0});function Ge(t,r){if(t&1&&(o(0,"p"),s(1),c()),t&2){let e=r.$implicit;m(),Q("",e.timestamp,": ",e.log,"")}}function $e(t,r){if(t&1){let e=X();o(0,"h1"),s(1,"Medicine Intake Details"),c(),o(2,"mat-card",2),s(3),c(),b(4,"br"),o(5,"mat-card",2),s(6),c(),b(7,"br"),o(8,"mat-card",2),s(9),c(),b(10,"br"),o(11,"mat-card",1)(12,"mat-card-header")(13,"mat-card-title"),s(14,"Logging Information"),c(),o(15,"mat-card-subtitle"),s(16,"Recent Events:"),c()(),o(17,"mat-card-content"),$(18,Ge,2,2,"p",null,G),c(),o(20,"mat-card-actions",3)(21,"button",4),q("click",function(){B(e);let i=w();return z(i.viewFullLog())}),s(22,"View full log"),c()()()}if(t&2){let e=w();m(2),A("ngClass",N(6,ae,e.getMorningClass()==="taken",e.getMorningClass()==="not-taken")),m(),F(" Morning Dose: ",e.wasMorningMedicineTaken()?"Taken":"Not Taken"," "),m(2),A("ngClass",N(9,ae,e.getNoonClass()==="taken",e.getNoonClass()==="not-taken")),m(),F(" Noon Dose: ",e.wasNoonMedicineTaken()?"Taken":"Not Taken"," "),m(2),A("ngClass",N(12,ae,e.getEveningClass()==="taken",e.getEveningClass()==="not-taken")),m(),F(" Evening Dose: ",e.wasEveningMedicineTaken()?"Taken":"Not Taken"," "),m(9),Z(e.intakeMedicineLog.getValue().slice(0,3))}}function Ze(t,r){if(t&1&&(o(0,"p"),s(1),c()),t&2){let e=r.$implicit;m(),Q("",e.timestamp,": ",e.log,"")}}function Xe(t,r){if(t&1){let e=X();o(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),s(3,"Logging Information"),c(),o(4,"mat-card-subtitle"),s(5,"Recent Events:"),c()(),o(6,"mat-card-content"),$(7,Ze,2,2,"p",null,G),be(9,"async"),c(),o(10,"mat-card-actions",3)(11,"button",4),q("click",function(){B(e);let i=w();return z(i.exitFullLog())}),s(12,"Back"),c()()()}if(t&2){let e=w();m(7),Z(Ce(9,0,e.intakeMedicineLog))}}var O=class t{bluetoothService=S(Ie);intakeMedicineLog=new oe([]);showLogs=!1;currentDate=new Date;ngOnInit(){this.bluetoothService.data$.pipe(u(r=>r==="intake medicine"),I(r=>{this.intakeMedicineLog.next([{timestamp:new Date,log:r},...this.intakeMedicineLog.getValue()])})).subscribe()}viewFullLog(){this.showLogs=!0}exitFullLog(){this.showLogs=!1}wasMorningMedicineTaken(){return this.isLogAvailableForTimeframe(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),10,0,0,0),new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),11,0,0,0))}wasNoonMedicineTaken(){return this.isLogAvailableForTimeframe(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),11,0,0,0),new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),14,0,0,0))}wasEveningMedicineTaken(){return this.isLogAvailableForTimeframe(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),17,0,0,0),new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),18,0,0,0))}morningMedicineDue(){return this.hasTimeframePassed(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),11,0,0,0))}noonMedicineDue(){return this.hasTimeframePassed(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),13,0,0,0))}eveningMedicineDue(){return this.hasTimeframePassed(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),this.currentDate.getDate(),18,0,0,0))}isLogAvailableForTimeframe(r,e){return this.intakeMedicineLog.getValue().some(a=>a.timestamp>=r&&a.timestamp<=e)}hasTimeframePassed(r){return this.currentDate>r}getMorningClass(){return this.morningMedicineDue()?this.wasMorningMedicineTaken()?"taken":"not-taken":""}getNoonClass(){return this.noonMedicineDue()?this.wasNoonMedicineTaken()?"taken":"not-taken":""}getEveningClass(){return this.eveningMedicineDue()?this.wasEveningMedicineTaken()?"taken":"not-taken":""}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-details"]],decls:3,vars:1,consts:[[1,"container"],["appearance","outlined"],["appearance","outlined",3,"ngClass"],["align","end"],["mat-button","","color","accent",3,"click"]],template:function(e,a){e&1&&(o(0,"div",0),fe(1,$e,23,15)(2,Xe,13,2,"mat-card",1),c()),e&2&&(m(),ve(a.showLogs?2:1))},dependencies:[Le,_e,Ne,Ae,Oe,Fe,Se,we,xe,ye],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}mat-card[_ngcontent-%COMP%]{width:80%;max-width:800px;display:flex;flex-direction:column;align-items:center;padding:1.5rem}mat-card.dose-information[_ngcontent-%COMP%]{font-size:1.5rem}mat-card.taken[_ngcontent-%COMP%]{background-color:#66e082}mat-card.not-taken[_ngcontent-%COMP%]{background-color:#ff6f6f}"]})};var C=class t{title="MediMinder";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,a){e&1&&b(0,"router-outlet")},dependencies:[ke],encapsulation:2})};var Pe=[{path:"",component:C,children:[{path:"",loadComponent:()=>import("./chunk-XQSKW4EZ.js").then(t=>t.HomeComponent)}]},{path:"details/:id",component:O}];var k="Service workers are disabled or not supported by this browser";function qe(t){return P(()=>se(new Error(t)))}var D=class{serviceWorker;worker;registration;events;constructor(r){if(this.serviceWorker=r,!r)this.worker=this.events=this.registration=qe(k);else{let a=j(r,"controllerchange").pipe(p(()=>r.controller)),i=P(()=>T(r.controller)),d=de(i,a);this.worker=d.pipe(u(h=>!!h)),this.registration=this.worker.pipe(M(()=>r.getRegistration()));let re=j(r,"message").pipe(p(h=>h.data)).pipe(u(h=>h&&h.type)).pipe(le());re.connect(),this.events=re}}postMessage(r,e){return this.worker.pipe(g(1),I(a=>{a.postMessage(ie({action:r},e))})).toPromise().then(()=>{})}postMessageWithOperation(r,e,a){let i=this.waitForOperationCompleted(a),d=this.postMessage(r,e);return Promise.all([d,i]).then(([,n])=>n)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(r){let e;return typeof r=="string"?e=a=>a.type===r:e=a=>r.includes(a.type),this.events.pipe(u(e))}nextEventOfType(r){return this.eventsOfType(r).pipe(g(1))}waitForOperationCompleted(r){return this.eventsOfType("OPERATION_COMPLETED").pipe(u(e=>e.nonce===r),g(1),p(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Je=(()=>{class t{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ne;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=v,this.notificationClicks=v,this.subscription=v;return}this.messages=this.sw.eventsOfType("PUSH").pipe(p(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(p(i=>i.data)),this.pushManager=this.sw.registration.pipe(p(i=>i.pushManager));let a=this.pushManager.pipe(M(i=>i.getSubscription()));this.subscription=R(a,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(k));let a={userVisibleOnly:!0},i=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),d=new Uint8Array(new ArrayBuffer(i.length));for(let n=0;n<i.length;n++)d[n]=i.charCodeAt(n);return a.applicationServerKey=d,this.pushManager.pipe(M(n=>n.subscribe(a)),g(1)).toPromise().then(n=>(this.subscriptionChanges.next(n),n))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(k));let e=a=>{if(a===null)throw new Error("Not subscribed to push notifications.");return a.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(g(1),M(e)).toPromise()}decodeBase64(e){return atob(e)}static \u0275fac=function(a){return new(a||t)(W(D))};static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})(),Qe=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=v,this.unrecoverable=v;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(k));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(k));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(a){return new(a||t)(W(D))};static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})();var je=new _("");function et(t,r,e){return()=>{if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let a=t.get(ge),i=t.get(H);a.runOutsideAngular(()=>{let n=navigator.serviceWorker,l=()=>n.controller?.postMessage({action:"INITIALIZE"});n.addEventListener("controllerchange",l),i.onDestroy(()=>{n.removeEventListener("controllerchange",l)})});let d;if(typeof e.registrationStrategy=="function")d=e.registrationStrategy();else{let[n,...l]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(n){case"registerImmediately":d=T(null);break;case"registerWithDelay":d=Re(+l[0]||0);break;case"registerWhenStable":let L=ce(t.get(H).whenStable());d=l[0]?R(L,Re(+l[0])):L;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}a.runOutsideAngular(()=>d.pipe(g(1)).subscribe(()=>navigator.serviceWorker.register(r,{scope:e.scope}).catch(n=>console.error("Service worker registration failed with:",n))))}}function Re(t){return T(null).pipe(me(t))}function tt(t){return new D(t.enabled!==!1?navigator.serviceWorker:void 0)}var E=class{enabled;scope;registrationStrategy};function Ve(t,r={}){return pe([Je,Qe,{provide:je,useValue:t},{provide:E,useValue:r},{provide:D,useFactory:tt,deps:[E]},{provide:he,useFactory:et,deps:[ue,je,E],multi:!0}])}var Ue={providers:[De({eventCoalescing:!0}),Te(Pe),Ve("ngsw-worker.js",{enabled:!Me(),registrationStrategy:"registerWhenStable:30000"})]};Ee(C,Ue).catch(t=>console.error(t));
